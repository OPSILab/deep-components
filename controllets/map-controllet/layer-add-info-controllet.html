<dom-module id="layer-add-info-controllet">

    <style>
        paper-slider {
            width: 24%;
            margin-top: 15px;
        }

        paper-slider.red {
            --paper-slider-knob-color: var(--paper-red-500);
            --paper-slider-active-color: var(--paper-red-500);
        }

        paper-slider.green {
            --paper-slider-knob-color: var(--paper-green-500);
            --paper-slider-active-color: var(--paper-green-500);
        }

        paper-slider.blue {
            --paper-slider-knob-color: var(--paper-light-blue-500);
            --paper-slider-active-color: var(--paper-light-blue-500);
        }

        paper-slider.alpha {
            --paper-slider-knob-color: #BBB;
            --paper-slider-active-color: #BBB;
        }

        .row DIV {
            display: inline;
        }

        .row LABEL {
            color: #757575;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-family: 'Roboto', 'Noto', sans-serif;
            -webkit-font-smoothing: antialiased;
            font-size: 11px;
            font-weight: 400;
            line-height: 24px;
            position: absolute;
            margin-left: 15px;
        }

    </style>

    <template>
        <paper-input value={{geometry_type}} label="{{_translate('geometry-type')}}" readonly></paper-input>

        <paper-input value={{geometry_name}} label="{{_translate('geometry-name')}}" readonly></paper-input>

        <paper-input value={{features_count}} label="{{_translate('features-count')}}" readonly></paper-input>

        <paper-textarea value={{properties_name}} label="{{_translate('properties-name')}}" rows="2"
                        readonly></paper-textarea>

    </template>

    <script>
        Polymer({

            is: 'layer-add-info-controllet',

            properties: {
                layer: {
                    type: Object,
                    value: undefined,
                    observer: '_onLayerChange'
                },
                features_count: {type: Number, value: undefined},
                geometry_name: {type: String, value: ''},
                geometry_type: {type: Number, value: ''},
                properties_name: {type: Array, value: undefined},
                features_data: {type: Array, value: undefined},
                edit: {type: Boolean, value: false}
            },

            _onLayerChange: function (layer) {
                if (layer) {
                    if (layer.getInfo) {
                        this.parentElement.set('skip', false)
                        layer.getInfo(function (info) {
                            this.features_count = info.featuresCount;
                            this.geometry_name = info.geometryName;
                            this.geometry_type = info.geometryType;
                            this.properties_name = info.propertiesName.join(', ');
//                    this.data = info.data;
                        }.bind(this));
                    } else {
                        this.parentElement.set('skip', true)
                    }
                } else {
//                    this._reset();
                }
            },
            isValid: function (callback) {
                callback({valid: true});
            },

            _translate: function (key) {
                return getTranslatedText([this.localName, key]);
            },
            _reset: function () {
                this.features_count = 0;
                this.geometry_name = '';
                this.geometry_type = '';
                this.properties_name = '';
            },

        });

    </script>

</dom-module>